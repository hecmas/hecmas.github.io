<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>SNARKs | HÃ©ctor Masip Ardevol</title><link>https://hecmas.github.io/category/snarks/</link><atom:link href="https://hecmas.github.io/category/snarks/index.xml" rel="self" type="application/rss+xml"/><description>SNARKs</description><generator>Wowchemy (https://wowchemy.com)</generator><language>en-us</language><lastBuildDate>Wed, 12 Oct 2022 00:00:00 +0000</lastBuildDate><image><url>https://hecmas.github.io/media/icon_hu4f2343c08b5429b30889a64aa4ca8e00_26881_512x512_fill_lanczos_center_3.png</url><title>SNARKs</title><link>https://hecmas.github.io/category/snarks/</link></image><item><title>Degree Adjustment in SNARKs</title><link>https://hecmas.github.io/post/snarks/</link><pubDate>Wed, 12 Oct 2022 00:00:00 +0000</pubDate><guid>https://hecmas.github.io/post/snarks/</guid><description>&lt;h2 id="notation">Notation&lt;/h2>
&lt;p>We will denote by
$\mathbb{F}$ to a finite field and
$\mathbb{F}^*$ to its respective multiplicative group. We will also denote as $H$ to a subgroup of $\mathbb{F}^*$. Finally, we will denote by $Z_H$ to the polynomial over $\mathbb{F}$ that vanishes on $H$a and call it the &lt;strong>vanishing polynomial&lt;/strong>.&lt;/p>
&lt;p>Given a polynomial $p \in \mathbb{F}[X]$ and an &lt;strong>evaluation domain&lt;/strong> $H$, we will denote by $\tilde{p}$ to the polynomial resulting from the interpolation of the set of points ${(h, p(h)), \text{ for } h \in H}$.&lt;/p>
&lt;h2 id="statement">Statement&lt;/h2>
&lt;p>Let $d,D \in \mathbb{N}$ such that $D &amp;gt; d$ and let $f \in \mathbb{F}[X]$. Let $g \in \mathbb{F}[X]$ be the polynomial defined as:
$$
g(X) = f(X) + X^{D-d} \cdot f(X).
$$&lt;/p>
&lt;p>Then, if $\tilde{f}$ has degree lower than $d$ then we have that $\tilde{g}$ has degree lower than $D$ (Prove it! Hint: Divide $f$ by $Z_H$).&lt;/p>
&lt;div class="alert alert-note">
&lt;div>
&lt;p>In our context, it is always the case that $D$ is a power of two and $d$ is not. What we intend with this &amp;ldquo;degree adjustment&amp;rdquo; is to form a polynomial lower than a power of two from a polynomial for which this is not the case.&lt;/p>
&lt;p>One can imagine $D = 8$ and $d = 5$ so that we adjust the degree to the &amp;ldquo;next&amp;rdquo; power of two.&lt;/p>
&lt;/div>
&lt;/div>
&lt;p>To achieve the converse, we need to involve random coefficients $\alpha$ and $\beta$ and define $g(X)$ in the following way:
$$
g(X) = \alpha \cdot f(X) + \beta \cdot X^{D-d} \cdot f(X).
$$&lt;/p>
&lt;p>Now, we can claim that $\tilde{f}$ has degree lower than $d$ &lt;strong>if and only if&lt;/strong> $\tilde{g}$ has degree lower than $D$.&lt;/p>
&lt;h2 id="example-randomness-is-necessary">Example: Randomness is Necessary&lt;/h2>
&lt;p>Let&amp;rsquo;s see why the converse is not true in the first definition of $g$.&lt;/p>
&lt;!--
the generator g is chosen to be 5, so that \omega = g^(2*3) = 8
-->
&lt;p>Let $\mathbb{F} = \mathbb{Z}_{97}$ (notably, $96 = 2^5 \cdot 3$), let $\omega = 8$ be a primitive $16$-th root of unity and let:
$$
H = \langle \omega \rangle = {1,8, 64, 27, 22, 79, 50, 12, 96, 89, 33, 70, 75, 18, 47, 85}
$$
be the subset of $\mathbb{F}^*$, generated by $\omega$, containing all the $16$-th roots of unity. We therefore have that $Z_H(X) = X^{16} - 1$ is the vanishing polynomial on $H$.&lt;/p>
&lt;p>Assume that $D = 8$ and $d = 5$.&lt;/p>
&lt;p>Now, let $f(X) = Z_H(X) + X^{14} - X^{11} + X^{8} - X^5$. We therefore have that:
$$
f(X) \equiv X^{14} - X^{11} + X^{8} - X^5 \pmod{Z_H(X)},
$$
so that $f(X)$ behaves identical to $X^{14} - X^{11} + X^{8} - X^5$ when evaluated on $H$, implying that the interpolated polynomial $\tilde{f}$ will be of degree $14$.&lt;/p>
&lt;p>In this case, we have that:
\begin{align}
g(X) &amp;amp;= (Z_H(X) + X^{14} - X^{11} + X^{8} - X^5) + X^3 \cdot (Z_H(X) + X^{14} - X^{11} + X^{8} - X^5) \ &amp;amp;= (X^3 + 1)Z_H(X) + X^{17} - X^{5} = (X^3 + X + 1)Z_H(X) - X^{5} + X,
\end{align}
so that $g$ behaves identical to $-X^{5} + X$ when evaluated on $H$, implying that the interpolated polynomial $\tilde{g}$ is of degree $5$.&lt;/p>
&lt;p>Hence, $\tilde{g}$ is a polynomial of degree $5 &amp;lt; D$ even that $\tilde{f}$ is of degree $14 &amp;gt; d$.&lt;/p>
&lt;p>Randomness comes to the rescue!&lt;/p>
&lt;p>Say that $\alpha = 3$ and $\beta = 13$.&lt;/p>
&lt;p>In this case we have:
\begin{align}
g(X) &amp;amp;= 3 \cdot (Z_H(X) + X^{14} - X^{11} + X^{8} - X^5) + 13 \cdot X^3 \cdot (Z_H(X) + X^{14} - X^{11} + X^{8} - X^5) \ &amp;amp;= (13 \cdot X^3 + 13 \cdot X + 3)Z_H(X) - 10 \cdot X^{14} + 10 \cdot X^{11} - 10 \cdot X^{8} - 3 \cdot X^5 + 13 \cdot X,
\end{align}&lt;/p>
&lt;p>As it can be seen, thanks to the random values, now the high-degree terms do not cancel out and we find that $\tilde{g}$ is a polynomial of degree ${14}$.&lt;/p>
&lt;h2 id="alternatives">Alternatives&lt;/h2>
&lt;p>The following alternatives also work! We should assume however that the Prover cannot predict the randomness in advance.&lt;/p>
&lt;h3 id="beta--alpha2-or-in-general-beta--falpha">$\beta = \alpha^2$ (or in general $\beta = f(\alpha)$)&lt;/h3>
&lt;p>$$
g(X) = \alpha \cdot f(X) + \alpha^2 \cdot X^{D-d} \cdot f(X).
$$
As far as $\alpha \neq \alpha^2$ this alternative will also work and therefore we would save one random value in the process. However, notice that the probability of $\tilde{g}$ being a low degree polynomial is of $1 - 2/|\mathbb{F}|$, since both $\alpha = 0$ and $\alpha = 1$ would make it fail.&lt;/p>
&lt;p>In general, all $\alpha$&amp;rsquo;s that make $\alpha = \beta = f(\alpha)$ would make it fail.&lt;/p>
&lt;h3 id="only-alpha-is-used">Only $\alpha$ is used&lt;/h3>
&lt;p>$$
g(X) = \alpha \cdot f(X) + X^{D-d} \cdot f(X).
$$
This should work as far $\alpha \neq 1$. The probability here is of $1 - 1/|\mathbb{F}|$.&lt;/p>
&lt;h3 id="only-beta-is-used">Only $\beta$ is used&lt;/h3>
&lt;p>$$
g(X) = f(X) + \beta \cdot X^{D-d} \cdot f(X).
$$
This should work as far $\beta \neq 1$. The probability here is of $1 - 1/|\mathbb{F}|$.&lt;/p>
&lt;h2 id="when-both-random-values-are-necessary">When Both Random Values are Necessary&lt;/h2>
&lt;p>Say that we have $f_1,f_2 \in \mathbb{F}[X]$ and we define:
$$
g(X) = (\alpha_1 \cdot f_1(X) + \beta_1 \cdot X^{D-d_1} \cdot f_1(X)) + (\alpha_2 \cdot f_2(X) + \beta_2 \cdot X^{D-d_2} \cdot f_2(X)).
$$
Here we have that $\tilde{g}$ is of degree lower than $D$ if and only if the degree of $\tilde{f_1} &amp;lt; d_1$ &lt;strong>and&lt;/strong> the degree of $\tilde{f_2} &amp;lt; d_2$.&lt;/p>
&lt;p>When we include in the definition of $g$ more than one $f$ polynomial, then both randomness are necessary to achieve the highest probability.&lt;/p>
&lt;h2 id="conclusion">Conclusion&lt;/h2>
&lt;p>We arrive to the following conclusions:&lt;/p>
&lt;ol>
&lt;li>If only one $f$ polynomial is included in the definition of $g$, then simply sample a random value $\alpha$ and define:
$$
g(X) = f(X) + \alpha \cdot X^{D-d} \cdot f(X).
$$&lt;/li>
&lt;li>If more than one $f$ polynomial is needed, then sample two random values $\alpha_i, \beta_i$ per $f$ polynomial and define:
$$
g(X) = \sum_{i=1}^k (\alpha_i \cdot f_i(X) + \beta_i \cdot X^{D-d_i} \cdot f_i(X)).
$$
In such case, the $\alpha_i$&amp;rsquo;s and $\beta_i$&amp;rsquo;s &lt;strong>must be sampled uniformly and independently (of each other)&lt;/strong> from $\mathbb{F}$. This guarantees that $\tilde{g}$ will be of low degree with probability $1 - 1/|\mathbb{F}|$, assuming that the $\tilde{f}$&amp;rsquo;s are of low degree.&lt;/li>
&lt;/ol></description></item></channel></rss>